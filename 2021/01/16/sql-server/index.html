<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>sql_server | Ephemeral-fever</title><meta name="author" content="Ephemeral-fever"><meta name="copyright" content="Ephemeral-fever"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="库创建数据库create database 数据库名字on primary(name&#x3D;&amp;#x27;f5&amp;#x27;,filename&#x3D;&amp;#x27;D:\1\f5.mdf&amp;#x27;,size&#x3D;3mb,maxsize&#x3D;unlimited,filegrowth&#x3D;1%)log on(name&#x3D;&amp;#x27;f6&amp;#x27;,filename&#x3D;&amp;#x27;D:\1\f6.ldf&amp;#x27;,size&#x3D;3mb">
<meta property="og:type" content="article">
<meta property="og:title" content="sql_server">
<meta property="og:url" content="http://example.com/2021/01/16/sql-server/index.html">
<meta property="og:site_name" content="Ephemeral-fever">
<meta property="og:description" content="库创建数据库create database 数据库名字on primary(name&#x3D;&amp;#x27;f5&amp;#x27;,filename&#x3D;&amp;#x27;D:\1\f5.mdf&amp;#x27;,size&#x3D;3mb,maxsize&#x3D;unlimited,filegrowth&#x3D;1%)log on(name&#x3D;&amp;#x27;f6&amp;#x27;,filename&#x3D;&amp;#x27;D:\1\f6.ldf&amp;#x27;,size&#x3D;3mb">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/pic8.jpg">
<meta property="article:published_time" content="2021-01-16T15:38:06.000Z">
<meta property="article:modified_time" content="2021-12-15T15:20:53.245Z">
<meta property="article:author" content="Ephemeral-fever">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/pic8.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/01/16/sql-server/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="yandex-verification" content="{&quot;enable&quot;:true}"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-12-15 23:20:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/head-sculpture.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/pic8.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Ephemeral-fever</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">sql_server</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-01-16T15:38:06.000Z" title="发表于 2021-01-16 23:38:06">2021-01-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-12-15T15:20:53.245Z" title="更新于 2021-12-15 23:20:53">2021-12-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/sql/">sql</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="库"><a href="#库" class="headerlink" title="库"></a>库</h1><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> 数据库名字</span><br><span class="line"><span class="keyword">on</span> primary</span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;f5&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;D:\1\f5.mdf&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=<span class="number">3</span>mb,</span><br><span class="line"><span class="keyword">maxsize</span>=<span class="keyword">unlimited</span>,</span><br><span class="line">filegrowth=<span class="number">1</span>%</span><br><span class="line">)</span><br><span class="line"><span class="keyword">log</span> <span class="keyword">on</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;f6&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;D:\1\f6.ldf&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=<span class="number">3</span>mb,</span><br><span class="line"><span class="keyword">maxsize</span>=<span class="number">300</span>mb,</span><br><span class="line">filegrowth=<span class="number">1</span>mb</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="修改数据库名字"><a href="#修改数据库名字" class="headerlink" title="修改数据库名字"></a>修改数据库名字</h2><p>语法：<br><code>alter database 原数据库名字</code><br><code>modify name=新数据库名字</code></p>
<h2 id="给数据库添加辅助文件和日志文件"><a href="#给数据库添加辅助文件和日志文件" class="headerlink" title="给数据库添加辅助文件和日志文件"></a>给数据库添加辅助文件和日志文件</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> 数据库名字</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">file</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=,</span><br><span class="line"><span class="keyword">maxsize</span>=,</span><br><span class="line">filegrowth=</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> 数据库名字</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">log</span> <span class="keyword">file</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=,</span><br><span class="line"><span class="keyword">maxsize</span>=,</span><br><span class="line">filegrowth=</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h2><p>语法：<code>drop database 数据库名</code></p>
<h2 id="切换数据库"><a href="#切换数据库" class="headerlink" title="切换数据库"></a>切换数据库</h2><p>语法：<code>use 数据库的名字</code></p>
<h1 id="表"><a href="#表" class="headerlink" title="表"></a>表</h1><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="精确数字"><a href="#精确数字" class="headerlink" title="精确数字"></a>精确数字</h3><p>bigint    大正型    8字节<br>int    整型    4字节<br>smallint    小整型    2字节<br>tinyint    微整型    1字节<br>bit    位类型    只有0和1两种取值，在输入0以外的其他值时，系统军=均吧它看为1<br>decimal（p，s）    p总位数，默认18；s小数位数，默认0<br>numeric（p，s）    同上</p>
<h3 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h3><p>datetime        8字节<br>smalldatetime    4字节</p>
<h3 id="字-符串"><a href="#字-符串" class="headerlink" title="字 符串"></a>字 符串</h3><p>char（n）        n表示所有字符所占的存储空间，取值1~8000<br>varchar（n）    变动长度，节省空间，其他同上</p>
<h3 id="二进制字符串"><a href="#二进制字符串" class="headerlink" title="二进制字符串"></a>二进制字符串</h3><p>binary（n）    n+4字节    n最大为8000，用于存储图像等数据<br>varbinary（n）    n+4字节    同上</p>
<h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students</span><br><span class="line">(</span><br><span class="line">学号 <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">姓名 <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">性别 <span class="built_in">varchar</span>(<span class="number">255</span>),</span><br><span class="line">年龄 <span class="built_in">int</span>,</span><br><span class="line">年级 <span class="built_in">varchar</span>(<span class="number">255</span>),</span><br><span class="line">学院 <span class="built_in">varchar</span>(<span class="number">255</span>),</span><br><span class="line">专业 <span class="built_in">varchar</span>(<span class="number">255</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h2><p>语法：<code>drop table 表名</code></p>
<h2 id="添加-列-属性"><a href="#添加-列-属性" class="headerlink" title="添加(列)属性"></a>添加(列)属性</h2><p>语法：<br><code>alter table 表名</code><br><code>add 属性 数据类型[(长度)][null | not null]</code></p>
<h2 id="修改数据类型"><a href="#修改数据类型" class="headerlink" title="修改数据类型"></a>修改数据类型</h2><p>语法：<br><code>alter table 表名</code><br><code>alter column 属性 数据类型</code></p>
<h2 id="删除-列-属性"><a href="#删除-列-属性" class="headerlink" title="删除(列)属性"></a>删除(列)属性</h2><p>语法：<br><code>alter table 表名</code><br><code>drop column 属性</code></p>
<h2 id="修改列名"><a href="#修改列名" class="headerlink" title="修改列名"></a>修改列名</h2><p>语法：<br><code>exec sp_rename &#39;表名.列名&#39;,&#39;新列名&#39;</code></p>
<h2 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h2><p>语法：<br><code>exec sp_rename &#39;原表名&#39;,&#39;新表名&#39;</code></p>
<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>(1) 主键约束    primary key    唯一确定表中每一条记录的标识符<br>(2) 外键约束    foreign key    用于建立和加强两个表数据之间的连接<br>(3) 唯一约束    unique        指定一个列或多个列的值具有唯一性(可以为空)<br>(4) 检查约束    check        设置检查条件以限制输入值<br>(5) 默认约束    default        插入操作中没有提供输入值时系统会自动加上指定值</p>
<h2 id="创建约束"><a href="#创建约束" class="headerlink" title="创建约束"></a>创建约束</h2><p>语法：<br><code>alter table 表名</code><br><code>add constraint 约束名 约束类型 （具体的约束说明）</code></p>
<p><strong>·primary key：</strong>主键约束（一个表中只能有一个主键约束且为空的列不能创建主键约束）<br><strong>·unique：</strong>唯一约束<br><strong>·check：</strong>检查约束<br>例如：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> ck_年龄 <span class="keyword">check</span> (年龄&gt;<span class="number">18</span>)</span><br></pre></td></tr></table></figure>
<p><strong>·default：</strong>默认约束（例如：<code>add constraint df_性别 default &#39;男&#39; for 性别</code>）<br><strong>·foreign key：</strong>外键约束（注意：两个表列中的数据类型一致，包括长度；引用的列必须是主键约束或唯一约束；列名尽量一致；本表该列数据为空）<br>例如：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> fk_学号 <span class="keyword">foreign</span> <span class="keyword">key</span> (学号)</span><br><span class="line"><span class="keyword">references</span> stu (学号)</span><br></pre></td></tr></table></figure>
<h2 id="删除约束"><a href="#删除约束" class="headerlink" title="删除约束"></a>删除约束</h2><p>语法：<br><code>alter table 表名</code><br><code>drop constraint 约束名</code></p>
<h1 id="例：创建图书管理数据库"><a href="#例：创建图书管理数据库" class="headerlink" title="例：创建图书管理数据库"></a>例：创建图书管理数据库</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> tsgl</span><br><span class="line"><span class="keyword">on</span> primary</span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;f8&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;D:\1\f8.mdf&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=<span class="number">3</span>mb,</span><br><span class="line"><span class="keyword">maxsize</span>=<span class="number">100</span>mb,</span><br><span class="line">filegrowth=<span class="number">1</span>%</span><br><span class="line">)</span><br><span class="line"><span class="keyword">log</span> <span class="keyword">on</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;f9&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;D:\1\f9.ldf&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=<span class="number">3</span>mb,</span><br><span class="line"><span class="keyword">maxsize</span>=<span class="number">100</span>mb,</span><br><span class="line">filegrowth=<span class="number">1</span>mb</span><br><span class="line">)</span><br><span class="line"><span class="keyword">use</span> tsgl</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> ts</span><br><span class="line">(</span><br><span class="line">书号 <span class="built_in">char</span>(<span class="number">20</span>) primary <span class="keyword">key</span>,</span><br><span class="line">书名 <span class="built_in">char</span>(<span class="number">20</span>),</span><br><span class="line">出版社 <span class="built_in">char</span>(<span class="number">25</span>),</span><br><span class="line">类别 <span class="built_in">char</span>(<span class="number">20</span>),</span><br><span class="line">作者 <span class="built_in">char</span>(<span class="number">10</span>),</span><br><span class="line">出版时间 datetime,</span><br><span class="line">价格 <span class="built_in">int</span> <span class="keyword">check</span> (价格&gt;<span class="number">0</span>)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dz</span><br><span class="line">(</span><br><span class="line">编号 <span class="built_in">char</span>(<span class="number">20</span>) primary <span class="keyword">key</span>,<span class="comment">--主键的声明</span></span><br><span class="line">姓名 <span class="built_in">char</span>(<span class="number">20</span>),</span><br><span class="line">单位 <span class="built_in">char</span>(<span class="number">25</span>) <span class="keyword">default</span> <span class="string">&#x27;xxxx&#x27;</span>,<span class="comment">--默认约束的声明</span></span><br><span class="line">性别 <span class="built_in">char</span>(<span class="number">5</span>) <span class="keyword">check</span> (性别=<span class="string">&#x27;男&#x27;</span> <span class="keyword">or</span> 性别=<span class="string">&#x27;女&#x27;</span>),<span class="comment">--检查约束的声明</span></span><br><span class="line">电话 <span class="built_in">char</span>(<span class="number">15</span>) <span class="keyword">unique</span><span class="comment">--唯一约束的声明</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> jy</span><br><span class="line">(</span><br><span class="line">书号 <span class="built_in">char</span>(<span class="number">20</span>) <span class="keyword">foreign</span> <span class="keyword">key</span> <span class="keyword">references</span> ts (书号),<span class="comment">--外键约束的声明</span></span><br><span class="line">编号 <span class="built_in">char</span>(<span class="number">20</span>) <span class="keyword">foreign</span> <span class="keyword">key</span> <span class="keyword">references</span> dz (编号),</span><br><span class="line">借阅日期 datetime,</span><br><span class="line">还书日期 datetime,</span><br><span class="line">还书标识 <span class="built_in">char</span>(<span class="number">2</span>),</span><br><span class="line">primary <span class="keyword">key</span> (书号,编号)<span class="comment">--联合主键的声明方式,一般放最后写</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="T-sql"><a href="#T-sql" class="headerlink" title="T-sql"></a>T-sql</h1><p>标识符：<br>常规标识符、分隔标 识符<br>命名规则：<br>第一个字符：<strong>英文大小写字母、下划线（_）、@、#</strong><br>后续字符：<strong>以上再加上十进制数字、美元符号（$）</strong><br>另：标识符不能是T-sql保留字，不允许嵌入空格或其他特殊字符</p>
<p>常量：</p>
<ol>
<li>字符串常量：单引号内</li>
<li>Unicode字符串：前缀必须是大写N</li>
<li>二进制常量：前缀为0x并且是十六进制字符串</li>
<li>bit常量：用0和1表示</li>
<li>datatime常量</li>
<li>integer：没有引号且不包含小数点的数字字符串（整数）</li>
<li>decimal常量：没有引号且包含小数点的数字字符串（小数）</li>
<li>float和real常量：科学计数法</li>
<li>money：前缀为货币符号$</li>
</ol>
<p>局部变量声明语法：<br><code>declare @variable_name datatype [,@variable_name datatype]...</code><br>其中，@variable_name是局部变量的名字，必须以“@”符号开头。datatype是为该局部变量指定的数据类型。</p>
<p>全局变量：事先定义好的变量，不允许用户创建（declare）或修改（set，select），可随时调用，全局变量的名字以@@开头</p>
<p>变量赋值语法格式：<br><code>set @local_variable=expression</code>    一次只能给一个变量赋值<br><code>select @local_variable=expression[,...n]</code>可以多个，中间逗号隔开</p>
<p>输出：<code>print @变量名</code>（一次只能输出一个变量）</p>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>连接运算符’+‘：可将字符串连接起来<br>例：<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> @<span class="keyword">name</span> <span class="built_in">char</span>（<span class="number">20</span>）</span><br><span class="line"><span class="keyword">set</span> @<span class="keyword">name</span>=<span class="string">&#x27;啥&#x27;</span></span><br><span class="line">print <span class="string">&#x27;你说的&#x27;</span>+@<span class="keyword">name</span></span><br></pre></td></tr></table></figure></p>
<p>一元运算符：<br>+：正<br>-：负<br>~：逻辑非，位反<br>优先级：<strong>一元&gt;算数&gt;比较&gt;逻辑&gt;赋值</strong></p>
<h2 id="流控制语句"><a href="#流控制语句" class="headerlink" title="流控制语句"></a>流控制语句</h2><h3 id="begin…end"><a href="#begin…end" class="headerlink" title="begin…end"></a>begin…end</h3><p>用于将多个语句组合成一个逻辑块<br>语法：<br><code>begin</code><br><code>&#123;sql_statement&#125;</code><br><code>end</code><br>（补充：{}代表所包含内容必写，[]代表所包含内容可选可写，| 代表两边内容二选一）<br>即：<br><code>begin</code><br><code>两条或两条以上T-sql语句</code><br><code>end</code><br>例：声明两个数字，交换位置<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> @x <span class="built_in">int</span>,@y <span class="built_in">int</span>,@t <span class="built_in">int</span></span><br><span class="line"><span class="keyword">set</span> @x=<span class="number">1</span></span><br><span class="line"><span class="keyword">set</span> @y=<span class="number">2</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">set</span> @t=@x</span><br><span class="line"><span class="keyword">set</span> @x=@y</span><br><span class="line"><span class="keyword">set</span> @y=@x</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">print @x</span><br><span class="line">print @y</span><br></pre></td></tr></table></figure></p>
<h3 id="if…else"><a href="#if…else" class="headerlink" title="if…else"></a>if…else</h3><p>语法：<br><code>if boolean_expression</code><br><code>&#123;sql_statement | statement_block&#125;</code><br><code>[else</code><br><code>&#123;sql_statement | statement_block&#125;]</code><br>例：输入一个坐标值，然后判断它在哪一个象限<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> @x <span class="built_in">int</span>,@y <span class="built_in">int</span></span><br><span class="line"><span class="keyword">set</span> @x=<span class="number">8</span></span><br><span class="line"><span class="keyword">set</span> @y=<span class="number">-3</span></span><br><span class="line"><span class="keyword">if</span> @x&gt;<span class="number">0</span></span><br><span class="line">	<span class="keyword">if</span> @y&gt;<span class="number">0</span></span><br><span class="line">		print <span class="string">&#x27;@x@y位于第一象限&#x27;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		print <span class="string">&#x27;@x@y位于第四象限&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="keyword">if</span> @y&gt;<span class="number">0</span></span><br><span class="line">		print <span class="string">&#x27;@x@y位于第二象限&#x27;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		print <span class="string">&#x27;@x@y位于第三象限&#x27;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="while-break与continue"><a href="#while-break与continue" class="headerlink" title="while,break与continue"></a>while,break与continue</h3><p>语法：<br><code>while boolean_expression</code><br><code>begin</code><br><code>&#123;sql_statement | statement_block&#125;</code><br><code>[break]</code><br><code>[end]</code><br><code>&#123;sql_statement | statement_block&#125;</code><br><code>end</code><br>例：求1到10之间的偶数和(包括10)<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--不用continue</span></span><br><span class="line"><span class="keyword">declare</span> @n <span class="built_in">int</span>,@<span class="keyword">sum</span> <span class="built_in">int</span></span><br><span class="line"><span class="keyword">set</span> @n=<span class="number">1</span></span><br><span class="line"><span class="keyword">set</span> @<span class="keyword">sum</span>=<span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> @n&lt;=<span class="number">10</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">if</span> @n%<span class="number">2</span>=<span class="number">0</span></span><br><span class="line">		<span class="keyword">set</span> @<span class="keyword">sum</span>=@<span class="keyword">sum</span>+@n</span><br><span class="line">	<span class="keyword">set</span> @n=@n+<span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">print @<span class="keyword">sum</span></span><br><span class="line"><span class="comment">--用continue</span></span><br><span class="line"><span class="keyword">declare</span> @n <span class="built_in">int</span>,@<span class="keyword">sum</span> <span class="built_in">int</span></span><br><span class="line"><span class="keyword">set</span> @n=<span class="number">0</span></span><br><span class="line"><span class="keyword">set</span> @<span class="keyword">sum</span>=<span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> @n&lt;<span class="number">10</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">set</span> @n=@n+<span class="number">1</span></span><br><span class="line">	<span class="keyword">if</span> @n%<span class="number">2</span>=<span class="number">0</span></span><br><span class="line">		<span class="keyword">set</span> @<span class="keyword">sum</span>=@<span class="keyword">sum</span>+@n</span><br><span class="line">	<span class="keyword">else</span> continue</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">print @<span class="keyword">sum</span></span><br></pre></td></tr></table></figure></p>
<h3 id="case（多分支语句）"><a href="#case（多分支语句）" class="headerlink" title="case（多分支语句）"></a>case（多分支语句）</h3><p>可根据表达式的真假来确定是否返回某个值<br>语法：<br><code>case</code><br><code>when 判断条件 true then 语句</code><br><code>[...]</code><br><code>[else 语句]</code><br><code>end</code><br>例：根据学生分数给出判定，90-100（包含90）显示excellent，70-90（包含70）显示good，60-70显示（包含60）显示pass，其他分数显示fail</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> @grade <span class="built_in">int</span>,@message <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">set</span> @grade=<span class="number">58</span></span><br><span class="line"><span class="keyword">set</span> @message=</span><br><span class="line"><span class="keyword">case</span></span><br><span class="line">	<span class="keyword">when</span> @grade&gt;=<span class="number">90</span> <span class="keyword">and</span> @grade&lt;=<span class="number">100</span> <span class="keyword">then</span> <span class="string">&#x27;excellent&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> @grade&gt;=<span class="number">70</span> <span class="keyword">and</span> @grade&lt;<span class="number">90</span> <span class="keyword">then</span> <span class="string">&#x27;good&#x27;</span></span><br><span class="line">	<span class="keyword">when</span> @grade&gt;=<span class="number">60</span> <span class="keyword">and</span> @grade&lt;=<span class="number">70</span> <span class="keyword">then</span> <span class="string">&#x27;pass&#x27;</span></span><br><span class="line">	<span class="keyword">else</span> <span class="string">&#x27;fail&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">print @message</span><br></pre></td></tr></table></figure>
<h3 id="waitfor（延迟语句）"><a href="#waitfor（延迟语句）" class="headerlink" title="waitfor（延迟语句）"></a>waitfor（延迟语句）</h3><p>可以将它之后的语句在一个指定的时间间隔之后执行，或在未来的某一指定时间执行</p>
<p>语法：<code>waitfor delay &#39;time&#39; | time &#39;time&#39;</code><br>说明：其中delay用于设定等待的时间，最多可达24小时。time用于设定等待结束的时间点。“time”的数据类型必须为datetime，格式为’hh：mm：ss‘，不能包含日期。</p>
<p>例1：3秒后显示’傻瓜你好‘</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">waitfor delay &#x27;00:00:03&#x27;</span><br><span class="line">print &#x27;傻瓜你好&#x27;</span><br></pre></td></tr></table></figure>
<p>例2：15点显示’傻瓜来了‘<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">waitfor time &#x27;15:00:00&#x27;</span><br><span class="line">print &#x27;傻瓜来了&#x27;</span><br></pre></td></tr></table></figure></p>
<h3 id="goto"><a href="#goto" class="headerlink" title="goto"></a>goto</h3><p>用来改变程序执行的流程，使程序跳到标识符指定的程序行再继续往下执行<br>语法：<code>goto 标识符</code><br>程序行的标识符需要在其名称之后加上一个冒号“：”</p>
<p>例：用goto实现跳转输出小于等于3的值</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> @x <span class="built_in">int</span></span><br><span class="line"><span class="keyword">select</span> @x=<span class="number">1</span></span><br><span class="line">loving:</span><br><span class="line">	print @x</span><br><span class="line">	<span class="keyword">select</span> @x=@x+<span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> @x&lt;=<span class="number">3</span></span><br><span class="line"><span class="keyword">goto</span> loving</span><br></pre></td></tr></table></figure>
<h3 id="return无条件退出语句"><a href="#return无条件退出语句" class="headerlink" title="return无条件退出语句"></a>return无条件退出语句</h3><p>从查询或过程中无条件退出。此时位于return后面的语句是不被执行的<br>语法：<code>return [integer_expression]</code><br>integer_expression整数型</p>
<p>例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> @x <span class="built_in">int</span></span><br><span class="line"><span class="keyword">set</span> @x=<span class="number">3</span></span><br><span class="line"><span class="keyword">if</span> @x&gt;<span class="number">0</span></span><br><span class="line">print <span class="string">&#x27;遇到return之前&#x27;</span></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">print <span class="string">&#x27;遇到return之后&#x27;</span></span><br></pre></td></tr></table></figure>
<h1 id="dml"><a href="#dml" class="headerlink" title="dml"></a>dml</h1><h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><p>简单来说：<code>selecet 列名 from 表名</code><br>补充一些关键字：<br>（1）<strong>distinct</strong>：去重复(只针对一列)<br>语法：<code>select distinct ...from...</code><br>（2）<strong>top</strong>：规定返回记录的数目<br>语法：<code>select top n *|列名 from 表名（n为行数）</code><br>若组合使用：<code>select distinct top n ...from...</code>（去掉重复数据后，后面数据会往前补）<br>（3）<strong>union</strong>：用于合并两个或多个 SELECT 语句的结果集<br>注意：<strong>union内部的每个select语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每个 select 语句中的列的顺序必须相同。</strong><br>语法：<br><code>select 列名 from 表1</code><br><code>union</code><br><code>select 列名 feom 表2</code><br>说明：默认地，union操作符选取<strong>不同</strong>的值。如果允许重复的值，请使用union all<br>语法：<br><code>select 列名 from 表1</code><br><code>union all</code><br><code>select 列名 from 表2</code><br>说明：<strong>union结果集中的列名总是等于union中第一个select语句中的列名</strong></p>
<p>复杂的：<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">selecet select_list</span><br><span class="line">[into new_table_name]</span><br><span class="line">from table_list</span><br><span class="line">[where search_conditions]//选择查询</span><br><span class="line">[group by group_list]//数据分组</span><br><span class="line">[having search_conditions]</span><br><span class="line">[order by order_list [asc | desc]]</span><br></pre></td></tr></table></figure><br>如果同时出现，几个关键词前后顺序不能颠倒</p>
<h2 id="别名查询（对数据显示的标题进行修改）"><a href="#别名查询（对数据显示的标题进行修改）" class="headerlink" title="别名查询（对数据显示的标题进行修改）"></a>别名查询（对数据显示的标题进行修改）</h2><p>（1）<code>select 列名 &#39;别名&#39; from 表名</code><br>（2）<code>select &#39;别名&#39;=列名 from 表名</code><br>（3）<code>select 列名 as &#39;别名&#39; from 表名</code><br>同时可对列进行计算：<code>select 学号 &#39;调整前&#39;,学号-10 &#39;调整后&#39; from student</code></p>
<h2 id="范围搜索条件"><a href="#范围搜索条件" class="headerlink" title="范围搜索条件"></a>范围搜索条件</h2><p>between…and…<br>包括范围：<code>select 列名 from 表名 where 列名 between ... and ...</code>(包含边界值)<br>排他范围：(<code>where 列名 not between ... and ...</code>)</p>
<h2 id="列表搜索条件"><a href="#列表搜索条件" class="headerlink" title="列表搜索条件"></a>列表搜索条件</h2><p>in 用于选择与列表中的任意值匹配的行<br><code>select 列名 from 表名 where 列名 in(&#39;内容1&#39;,&#39;内容2&#39;)</code></p>
<h2 id="搜索条件中的字符匹配符"><a href="#搜索条件中的字符匹配符" class="headerlink" title="搜索条件中的字符匹配符"></a>搜索条件中的字符匹配符</h2><p>用like关键字搜索与指定模式匹配的字符串、日期或时间值<br>%：替代零个或多个字符<br>_：仅替代一个字符<br>[]：代表指定范围内的单个字符，[]中可以是单个字符（如[acef]），也可以是字符范围（如[a-f]）<br><sup><a href="#fn_" id="reffn_"></a></sup>：代表不在指定范围内的单个字符，<sup><a href="#fn_" id="reffn_"></a></sup>中可以是单个字符（如<sup><a href="#fn_acef" id="reffn_acef">acef</a></sup>），也可以是字符范围（<sup><a href="#fn_a-f" id="reffn_a-f">a-f</a></sup>）<br>例：<code>……where 班级名称 like &#39;pu%&#39;</code></p>
<h2 id="涉及空值的查询"><a href="#涉及空值的查询" class="headerlink" title="涉及空值的查询"></a>涉及空值的查询</h2><p>空值（NULL）表示不确定的值<br>判断取值为空的语句格式：<code>where 列名 is null</code><br>判断取值不为空的语句格式：<code>where 列名 is not null</code></p>
<h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><p>sum（[distinct] 列名）:计算列值总和；<br>avg（[distinct] 列名）:计算列值平均值；<br>max（[distinct] 列名）:计算列值最大值；<br>min（[distinct] 列名）:计算列值最小值；<br>count（*）：统计表中元组个数；<br>count（[distinct] 列名）：统计本列列值个数；<br>上述函数除count外，其他函数在计算过程中均忽略null值<br>语法：<code>select 聚合函数 from 表名</code></p>
<h2 id="数据分组语法"><a href="#数据分组语法" class="headerlink" title="数据分组语法"></a>数据分组语法</h2><p><code>select 列名，聚合函数 from 表名 group by 列名</code><br>例：查询每个年级的总人数和班级数量<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 年级，<span class="keyword">sum</span>（人数） <span class="keyword">as</span> 年级总人数，<span class="keyword">count</span>（班级编号）<span class="keyword">as</span> 班级数量</span><br><span class="line"><span class="keyword">from</span> 班级信息 <span class="keyword">group</span> <span class="keyword">by</span> 年级</span><br></pre></td></tr></table></figure></p>
<p>having通常和group by子句一起使用。相当于一个用于组的group子句，指定组的搜索条件。having子句可以包含聚合函数，但where不可以。<br>例：<code>select 学号，sum（成绩） as &#39;总成绩&#39; from 成绩表 group by 学号 having sum（成绩）&lt;600</code></p>
<h2 id="order-by"><a href="#order-by" class="headerlink" title="order by"></a>order by</h2><p>ORDER BY 默认升序，DESC表示降序，ASC表示升序，desc 或者 asc 只对它紧跟着的第一个列名有效，其他不受影响，仍然是默认的升序<br>例：<code>select * from 成绩表 order by 成绩 desc</code></p>
<h2 id="表连接"><a href="#表连接" class="headerlink" title="表连接"></a>表连接</h2><h3 id="内部连接"><a href="#内部连接" class="headerlink" title="内部连接"></a>内部连接</h3><p>内部连接：只有匹配到相同的数据才会输出<br>（1）等值连接<br>语法1：<code>select select_list from 表名1.表名2 where 表1.列=表2.列</code><br>语法2：<code>select select_list from 表1 [inner] join 表2 on 表1.列=表2.列</code><br>注：select子句列表中，每个目标列名前都要加上基表名称，即表名.列名<br>例：查询学生的学号，姓名，性别，以及所在的班级名称和年级<br>法1<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 学生信息.学号，学生信息.姓名，学生信息.性别，班级信息.班级名称，班级信息.年级 </span><br><span class="line"><span class="keyword">from</span> 学生信息，班级信息 </span><br><span class="line"><span class="keyword">where</span> 学生信息.班级编号=班级信息.班级编号</span><br></pre></td></tr></table></figure><br>法2<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 学生信息.学号，学生信息.姓名，学生信息.性别，班级信息.班级名称，班级信息.年级 </span><br><span class="line"><span class="keyword">from</span> 学生信息 <span class="keyword">inner</span> <span class="keyword">join</span> 班级信息</span><br><span class="line"><span class="keyword">on</span> 学生信息.班级编号=班级信息.班级编号</span><br></pre></td></tr></table></figure><br>简写：<code>select 学生信息.学号，姓名，性别，班级信息.班级名称，年级 from……</code></p>
<p>可结合别名查询<br>例：<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> s.学号，s.姓名，s.性别，c.班级名称，c.年级 </span><br><span class="line"><span class="keyword">from</span> 学生信息 <span class="keyword">as</span> s，班级信息  <span class="keyword">as</span> c</span><br><span class="line"><span class="keyword">where</span> s.班级编号=c.班级编号 [<span class="keyword">and</span> 其他条件……]</span><br></pre></td></tr></table></figure></p>
<p>（2）非等值连接<br>例：查询成绩大于40的学生个人情况，并按照成绩降序排列<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> g.课程编号,成绩,s.姓名,性别</span><br><span class="line"><span class="keyword">from</span> 成绩表 <span class="keyword">as</span> g，<span class="keyword">inner</span> <span class="keyword">join</span> 学生信息 <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">on</span> g.学号=s.学号 <span class="keyword">and</span> g.成绩&gt;<span class="number">40</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> g.成绩 <span class="keyword">desc</span></span><br></pre></td></tr></table></figure></p>
<h3 id="外部连接"><a href="#外部连接" class="headerlink" title="外部连接"></a>外部连接</h3><p>外部连接：会返回from子句中提到的至少一个表或视图的所有行<br>（1）左外部连接（left outer join）：对连接条件中左边的表不加限制，如果左表的某行在右表中没有找到匹配的行，则结果集中的右表的相对应的位置为null<br>例：查询所有学生的学号，姓名，课程编号，成绩<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 学生信息.学号，姓名，成绩表.课程编号，成绩</span><br><span class="line"><span class="keyword">from</span> 学生信息 <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> 成绩表</span><br><span class="line"><span class="keyword">on</span> 学生信息.学号=成绩表.学号</span><br></pre></td></tr></table></figure></p>
<p>（2）右外部连接（right outer join）：对连接条件中右边的表不加限制，如果右表的某行在左表中没有找到匹配的行，则结果集中的左表的相对应的位置为null</p>
<p>（3）全外连接（full outer join）：对两个表都不加限制，所有两个表中的行都会包括在结果集中，如果匹配不到，则在各自对应位置上显示null</p>
<h2 id="子查询：用来表示where子句的条件"><a href="#子查询：用来表示where子句的条件" class="headerlink" title="子查询：用来表示where子句的条件"></a>子查询：用来表示where子句的条件</h2><p>子查询可以嵌套在select、insert、update、delete语句中，总是使用圆括号括起来<br>（1）嵌套子查询<br>例1：查询计算机系的学生选修了哪些课程<br><code>select * from sc where sno in （select sno from studemt where sdept=‘计算机系’）</code><br>温馨提醒：where子句后的条件要什么，子查询就查什么</p>
<p>例2：查询修了‘c02’课程且成绩高于此课程的平均成绩的学生的学号和成绩<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> sno，grade</span><br><span class="line"><span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">where</span> cno=<span class="string">&#x27;c02&#x27;</span> <span class="keyword">and</span> grade&gt;（<span class="keyword">select</span> <span class="keyword">avg</span>（grade）<span class="keyword">from</span> sc <span class="keyword">where</span> cno=‘c02’）</span><br></pre></td></tr></table></figure></p>
<p>（2）相关子查询（单值子查询）<br>只返回一个值，然后将一列值与查询返回的值进行比较<br>例：查询和‘ff’在同一班级的学生的信息<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> s.学号,姓名,c.班级名称,年级</span><br><span class="line"><span class="keyword">from</span> 学生信息 <span class="keyword">as</span> s,班级信息 <span class="keyword">as</span> c</span><br><span class="line"><span class="keyword">where</span> s.班级编号=c.班级编号 <span class="keyword">and</span> </span><br><span class="line">s.班级编号=(<span class="keyword">select</span> 班级编号 <span class="keyword">from</span> 学生信息 <span class="keyword">where</span> 姓名=<span class="string">&#x27;ff&#x27;</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="在查询基础上创建新表select…into"><a href="#在查询基础上创建新表select…into" class="headerlink" title="在查询基础上创建新表select…into"></a>在查询基础上创建新表select…into</h2><p>语法：<code>select 列名 into 新表名 from 表名</code></p>
<h2 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h2><p>语法：<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 [（列名<span class="number">1</span>，列名<span class="number">2</span>，……）] </span><br><span class="line"><span class="keyword">values</span> （值<span class="number">1</span>，值<span class="number">2</span>，……）[，（值<span class="number">3</span>，值<span class="number">4</span>，……）]</span><br></pre></td></tr></table></figure><br>注：没有指定要插入数据的列名时需要列出插入行的每一列数据<br>例：<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student （学号，姓名，性别，年龄，年级，学院，专业）</span><br><span class="line"><span class="keyword">values</span>（<span class="number">2012</span>，<span class="string">&#x27;张三&#x27;</span>，<span class="string">&#x27;男&#x27;</span>，<span class="number">18</span>，<span class="string">&#x27;大一&#x27;</span>，<span class="string">&#x27;计算机&#x27;</span>，<span class="string">&#x27;计类&#x27;</span>）</span><br></pre></td></tr></table></figure></p>
<h3 id="使用insert和select插入"><a href="#使用insert和select插入" class="headerlink" title="使用insert和select插入"></a>使用insert和select插入</h3><p>可以将一个或多个表的值添加到另一个表中<br>语法：<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名<span class="number">1</span> [（列名<span class="number">1</span>，列名<span class="number">2</span>……）]</span><br><span class="line"><span class="keyword">select</span> 列名 <span class="keyword">from</span> 表名<span class="number">2</span> [<span class="keyword">where</span> 限定条件]</span><br><span class="line">注：表<span class="number">1</span>中所有数据类型都应和表<span class="number">2</span>一致</span><br></pre></td></tr></table></figure><br>例：<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 学生信息 </span><br><span class="line"><span class="keyword">select</span> 学号，姓名，性别，年龄 <span class="keyword">from</span> student <span class="keyword">where</span> 学院=<span class="string">&#x27;计算机&#x27;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h2><p>语法：<code>update 表名 set 列名=表达式 [where 限定条件]</code><br>注：如果条件不统一，要更改的值也不一样，需要分开来写<br>例1：<code>update 学生信息 set 学号=2011,年龄=18 where 姓名=&#39;张四&#39;</code><br>例2：将计算机院全体学生成绩加5<br>（1）子查询<br><code>update 成绩表 set grade=grade+5</code><br><code>where 学号 in （select 学号 from 学生信息 where 学院=‘计算机’）</code><br>（2）表连接<br><code>update 成绩表 set grade=grade+5</code><br><code>from 成绩表 join 学生信息 on 成绩表.学号=学生信息.学号 where 学院=‘计算机’</code></p>
<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><p>delete 语句可删除表或视图中的一行或多行<br>语法：<code>delete from 表名 where 限定条件</code><br>注：若不加“where 限定条件”则会删除整个表的数据，但可保留表的结构<br>例：删除20%的学生信息<br><code>delete top (20) percent from 学生信息</code><br>(注意加括号，若无percent则删除前20行)</p>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><p>视图是基于查询结果的虚表，<strong>对于表的所有操作，在视图中同样可以使用</strong><br>分为标准视图、索引视图、分区视图<br>优点：<br>1.着重于特定操作<br>2.简化数据操作<br>3.自定义数据<br>4.导出和导入数据<br>5.跨服务器组合分区数据</p>
<h2 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h2><p>语法：<br><code>create view [schema_name.] view_name</code><br><code>as</code><br><code>select_statement</code></p>
<p>schema_name：数据库名<br>view_name：视图名<br>select_statement：查询语句</p>
<h2 id="修改视图名称"><a href="#修改视图名称" class="headerlink" title="修改视图名称"></a>修改视图名称</h2><p>语法：<code>exec sp_rename  &#39;原视图名&#39;，&#39;新视图名&#39;</code><br>修改列名<br>语法：<code>exec sp_rename  &#39;视图名.列名&#39;，&#39;新列名&#39;</code></p>
<h2 id="管理视图"><a href="#管理视图" class="headerlink" title="管理视图"></a>管理视图</h2><p>插入数据<br>例：<br><code>insert into view_学生信息</code><br><code>values(&#39;7&#39;,&#39;13&#39;,&#39;张三&#39;,&#39;nan&#39;,&#39;beijing&#39;)</code><br>说明：<strong>视图里的数据一旦做了更改，原表的数据也会随之改变</strong></p>
<h2 id="修改视图"><a href="#修改视图" class="headerlink" title="修改视图"></a>修改视图</h2><p>语法：<br><code>alter view 视图名</code><br><code>as</code><br><code>select_statement</code><br>例：<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> view_成绩表</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> 学号，成绩 <span class="keyword">from</span> 成绩表</span><br></pre></td></tr></table></figure><br>说明：<strong>既能修改视图中的数据又能修改视图的结构</strong></p>
<h2 id="修改视图中的数据"><a href="#修改视图中的数据" class="headerlink" title="修改视图中的数据"></a>修改视图中的数据</h2><p>例：修改视图View_班级信息2中的人数80的班级编号改为28<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> View_班级信息<span class="number">2</span></span><br><span class="line"><span class="keyword">set</span> 班级编号=<span class="number">28</span></span><br><span class="line"><span class="keyword">where</span> 人数=<span class="number">80</span></span><br></pre></td></tr></table></figure></p>
<h2 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h2><p>语法：<code>drop view 视图名</code><br>例：<code>drop view 视图1，视图2</code></p>
<h2 id="删除视图中的数据"><a href="#删除视图中的数据" class="headerlink" title="删除视图中的数据"></a>删除视图中的数据</h2><p><code>delete from view_班级信息 where 人数=80</code><br>说明：<strong>原表的信息也会一并被删除</strong></p>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p>对数据库表中一个或多个列的值进行 排序的结构：有助于更快的获取信息（定位）<br>建立索引会减慢数据的修改速度<br><strong>作用</strong>：<br>（1）加快数据检索<br>（2）保证数据一致性<br>（3）实现表与表之间的参照完整性<br>（4）减少排序和分组时间</p>
<p><strong>选择创建索引的数据列</strong>：<br>（1）定义有主键和外键的列<br>（2）在指定范围中快速或频繁查询的列<br>（3）连接中频繁使用的列<br>（4）需要按排序顺序快速或频繁检索的列</p>
<p><strong>分类</strong>：<br>（1）聚集索引：索引的顺序决定了表中行的存储顺序，每个表中只能有一个聚集索引<br>（2）非聚集索引：定位数据</p>
<p>使用多个索引可以提高更新少而数据量大的查询的性能</p>
<h2 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h2><p><strong>需要注意</strong>：<br>（1）若创建了<strong>主键约束</strong>或<strong>唯一约束</strong>，系统将自动的为建有这些约束的列创建聚集索引<br>（2）当删除主键约束或唯一约束时，这些列上创建的聚集索引也会被自动删除<br>（3）若不指定索引类型，将使用<strong>非聚集索引</strong>作为默认的索引类型<br>语法：<br><code>create [unique]</code><br><code>[clustered | nonclustered] index index_name</code><br><code>on 表名 (列名   [,...n])</code></p>
<p>unique唯一的索引<br>clustered聚集索引<br>noncluster非聚集索引<br>index_name索引名<br>例1：为student表的sno列创建非聚集索引<br><code>create index index_sno on student (sno)</code><br>例2：为student表的sno列创建唯一聚集索引<br><code>create unique clustered index index_sno on student (sno)</code></p>
<h2 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h2><p>语法：<code>drop index 表名.索引名</code>或<code>drop index 视图名.索引名</code></p>
<h1 id="例-全有"><a href="#例-全有" class="headerlink" title="例(全有)"></a>例(全有)</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--新建数据库</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> stu</span><br><span class="line"><span class="keyword">on</span> primary</span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;f3&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;D:/SQL2019/SQLfile/f3.mdf&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=<span class="number">3</span>mb,</span><br><span class="line"><span class="keyword">maxsize</span>=<span class="number">200</span>mb,</span><br><span class="line">filegrowth=<span class="number">1</span>mb</span><br><span class="line">)</span><br><span class="line"><span class="keyword">log</span> <span class="keyword">on</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;f4&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;D:/SQL2019/SQLfile/f4.ldf&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=<span class="number">3</span>mb,</span><br><span class="line"><span class="keyword">maxsize</span>=<span class="number">200</span>mb,</span><br><span class="line">filiegrowth=<span class="number">1</span>%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">--修改数据库名字</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> stu</span><br><span class="line"><span class="keyword">modify</span> <span class="keyword">name</span>=stud</span><br><span class="line"></span><br><span class="line"><span class="comment">--添加辅助文件和日志文件</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> stud</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">file</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;f5&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;D:/SQL2019/SQLfile/f5.ndf&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=<span class="number">3</span>mb,</span><br><span class="line"><span class="keyword">maxsize</span>=<span class="number">200</span>mb,</span><br><span class="line">filegrowth=<span class="number">1</span>mb</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> stud</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">log</span> <span class="keyword">file</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">name</span>=<span class="string">&#x27;f6&#x27;</span>,</span><br><span class="line">filename=<span class="string">&#x27;D:/SQL2019/SQLfile/f6.ldf&#x27;</span>,</span><br><span class="line"><span class="keyword">size</span>=<span class="number">3</span>mb,</span><br><span class="line"><span class="keyword">maxsize</span>=<span class="number">200</span>mb,</span><br><span class="line">filegrowth=<span class="number">1</span>mb</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除数据库</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> stud</span><br><span class="line"></span><br><span class="line"><span class="comment">--切换数据库</span></span><br><span class="line"><span class="keyword">use</span> stud</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stus</span><br><span class="line">(</span><br><span class="line">学号 <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>,</span><br><span class="line">xingming <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">age <span class="built_in">int</span>,</span><br><span class="line">xueyuan <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> chengji</span><br><span class="line">(</span><br><span class="line">xuehao <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">foreign</span> <span class="keyword">key</span> <span class="keyword">references</span> stus(学号),<span class="comment">--外键约束</span></span><br><span class="line">xingming <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">unique</span>,<span class="comment">--唯一约束</span></span><br><span class="line">xingbie <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">check</span> (xingbie=<span class="string">&#x27;男&#x27;</span> <span class="keyword">or</span> xingbie=<span class="string">&#x27;女&#x27;</span>),<span class="comment">--检查约束</span></span><br><span class="line">kechengbianhao <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>,<span class="comment">--主键约束</span></span><br><span class="line">kecheng <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">grade <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">0</span><span class="comment">--默认约束 </span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> stus</span><br><span class="line"></span><br><span class="line"><span class="comment">--添加属性</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stus</span><br><span class="line"><span class="keyword">add</span> xingbie <span class="built_in">varchar</span>(<span class="number">3</span>) <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--修改数据类型</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stus</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">column</span> xuehao <span class="built_in">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除属性</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stus</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">column</span> xingbie</span><br><span class="line"></span><br><span class="line"><span class="comment">--修改列名</span></span><br><span class="line">exec sp_rename <span class="string">&#x27;stus.学号&#x27;</span>,<span class="string">&#x27;xuehao&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--修改表名</span></span><br><span class="line">exec sp_rename <span class="string">&#x27;stus&#x27;</span>,<span class="string">&#x27;students&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建约束</span></span><br><span class="line"><span class="comment">--1.主键约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> pk_学号 primary <span class="keyword">key</span> (学号)</span><br><span class="line"><span class="comment">--2.唯一约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> un_xingming <span class="keyword">unique</span> (xingming)</span><br><span class="line"><span class="comment">--3.检查约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> ch_cingbie <span class="keyword">check</span> (xingbie=<span class="string">&#x27;nan&#x27;</span> <span class="keyword">or</span> xingbie=<span class="string">&#x27;nv&#x27;</span>)</span><br><span class="line"><span class="comment">--4.默认约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> df_age <span class="keyword">default</span> <span class="string">&#x27;nan&#x27;</span> <span class="keyword">for</span> xingbie</span><br><span class="line"><span class="comment">--5.外键约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students</span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> fk_学号 <span class="keyword">foreign</span> <span class="keyword">key</span> (学号)</span><br><span class="line"><span class="keyword">references</span> chengji(xuehao)</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">constraint</span> pk_学号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students</span><br><span class="line"><span class="comment">--distinct关键字</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> age <span class="keyword">from</span> students</span><br><span class="line"><span class="comment">--top关键字</span></span><br><span class="line"><span class="keyword">select</span> top <span class="number">3</span> * <span class="keyword">from</span> students</span><br><span class="line"><span class="comment">--别名查询</span></span><br><span class="line"><span class="keyword">select</span> age <span class="string">&#x27;年龄&#x27;</span> <span class="keyword">from</span> students</span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;年龄&#x27;</span>=age <span class="keyword">from</span> students</span><br><span class="line"><span class="keyword">select</span> age <span class="keyword">as</span> <span class="string">&#x27;年龄&#x27;</span> <span class="keyword">from</span> students</span><br><span class="line"><span class="comment">--范围搜索条件between...and...</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="keyword">between</span> <span class="number">18</span> <span class="keyword">and</span> <span class="number">19</span></span><br><span class="line"><span class="comment">--列表搜索条件in</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students <span class="keyword">where</span> xingbie <span class="keyword">in</span> (<span class="string">&#x27;nan&#x27;</span>,<span class="string">&#x27;nv&#x27;</span>)</span><br><span class="line"><span class="comment">--字符匹配</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students <span class="keyword">where</span> xingming <span class="keyword">like</span> <span class="string">&#x27;wang%&#x27;</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students <span class="keyword">where</span> xingming <span class="keyword">like</span> <span class="string">&#x27;_[jian]&#x27;</span></span><br><span class="line"><span class="comment">--空值查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="keyword">is</span> <span class="literal">null</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line"><span class="comment">--聚合函数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(age) <span class="keyword">from</span> students<span class="comment">--总和   select sum(age) &#x27;年龄和&#x27; from students</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(age) <span class="keyword">from</span> students<span class="comment">--平均   select &#x27;平均年龄&#x27;=avg(age) from students</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(age) <span class="keyword">from</span> students<span class="comment">--最大   select max(age) as &#x27;最大年龄&#x27; from students</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">min</span>(age) <span class="keyword">from</span> students<span class="comment">--最小</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> students<span class="comment">--元组个数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(age) <span class="keyword">from</span> students<span class="comment">--列值个数</span></span><br><span class="line"><span class="comment">--数据分组group by</span></span><br><span class="line"><span class="keyword">select</span> xueyuan,<span class="keyword">avg</span>(age) <span class="keyword">as</span> <span class="string">&#x27;平均年龄&#x27;</span> <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> xueyuan</span><br><span class="line"><span class="comment">--having:总与group by一起使用</span></span><br><span class="line"><span class="keyword">select</span> xuehao,xingming,<span class="keyword">sum</span>(chengji) <span class="keyword">as</span> <span class="string">&#x27;总成绩&#x27;</span> <span class="keyword">from</span> chengji <span class="keyword">group</span> <span class="keyword">by</span> xuehao <span class="keyword">having</span> <span class="keyword">sum</span>(chengji)&lt;<span class="number">200</span></span><br><span class="line"><span class="comment">--order by 默认升序，DESC表示降序，ASC表示升序</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students <span class="keyword">order</span> <span class="keyword">by</span> age<span class="comment">--升序</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span><span class="comment">--降序</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--表连接</span></span><br><span class="line"><span class="comment">--1.内部连接</span></span><br><span class="line"><span class="comment">--(1)等值连接</span></span><br><span class="line"><span class="comment">--查询学生的学号,姓名以及所修的课程和成绩</span></span><br><span class="line"><span class="keyword">select</span> students.xuehao,students.xingming,chengji.kecheng,chengji.grade <span class="keyword">from</span> students,chengji </span><br><span class="line"><span class="keyword">where</span> students.xuehao=chengji.xuehao<span class="comment">--等值连接-&gt;法1</span></span><br><span class="line"><span class="keyword">select</span> students.xuehao,students.xingming,chengji.kechegn,chengji.grade <span class="keyword">from</span> students <span class="keyword">inner</span> <span class="keyword">join</span> chengji</span><br><span class="line"><span class="keyword">on</span> students.xuehao=chengji.xuehao<span class="comment">--等值连接-&gt;法2</span></span><br><span class="line"><span class="keyword">select</span> s.xuehao,s.xingming,c.kecheng,c.grade <span class="keyword">from</span> students <span class="keyword">as</span> s,chengji <span class="keyword">as</span> c</span><br><span class="line"><span class="keyword">where</span> s.xuehao=c.xuehao<span class="comment">--结合别名查询</span></span><br><span class="line"><span class="comment">--(2)非等值连接</span></span><br><span class="line"><span class="comment">--查询成绩大于50的学生个人情况并按成绩降序排序</span></span><br><span class="line"><span class="keyword">select</span> s.xuehao,s.xingming,c.kecheng,c.grade <span class="keyword">from</span> students <span class="keyword">as</span> s <span class="keyword">inner</span> <span class="keyword">join</span> chengji <span class="keyword">as</span> c</span><br><span class="line"><span class="keyword">on</span> s.xuehao=c.xuehao <span class="keyword">and</span> c.grade&gt;<span class="number">50</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> c.grade <span class="keyword">desc</span><span class="comment">--非等值连接</span></span><br><span class="line"><span class="comment">--2.外部连接</span></span><br><span class="line"><span class="comment">--左外部连接</span></span><br><span class="line"><span class="keyword">select</span> students.xuehao,xingming,chengji.kechengbianhao,kecheng</span><br><span class="line"><span class="keyword">from</span> students <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> chengji</span><br><span class="line"><span class="keyword">on</span> students.xuehao=chegnji.xuehao</span><br><span class="line"><span class="comment">--右外部连接</span></span><br><span class="line"><span class="keyword">select</span>  students.xuehao,xingming,chengji,kechengbianhao,kecheng</span><br><span class="line"><span class="keyword">from</span> studetns <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> chengji</span><br><span class="line"><span class="keyword">on</span> students.xuehao=chegnji.xuehao</span><br><span class="line"><span class="comment">--全外连接</span></span><br><span class="line"><span class="keyword">select</span>  students.xuehao,xingming,chengji,kechengbianhao,kecheng</span><br><span class="line"><span class="keyword">from</span> studetns <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> chengji</span><br><span class="line"><span class="keyword">on</span> students.xuehao=chegnji.xuehao</span><br><span class="line"></span><br><span class="line"><span class="comment">--子查询</span></span><br><span class="line"><span class="comment">--1.嵌套子查询</span></span><br><span class="line"><span class="comment">--查询计算机院的学生成绩</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> chengji <span class="keyword">where</span> xuehao <span class="keyword">in</span> (<span class="keyword">select</span> xuehao <span class="keyword">from</span> students <span class="keyword">where</span> xueyuan=<span class="string">&#x27;计算机&#x27;</span>)</span><br><span class="line"><span class="comment">--查询修了&#x27;c02&#x27;课程且成绩高于此课程的平均成绩的学生的学号和成绩</span></span><br><span class="line"><span class="keyword">select</span> xuehao,grade <span class="keyword">from</span> chengji</span><br><span class="line"><span class="keyword">where</span> kechengbianhao=<span class="string">&#x27;c02&#x27;</span> <span class="keyword">and</span> grade&gt;(<span class="keyword">select</span> <span class="keyword">avg</span>(grade) <span class="keyword">from</span> chengji <span class="keyword">where</span> kechengbianhao=<span class="string">&#x27;c02&#x27;</span>)</span><br><span class="line"><span class="comment">--2.相关子查询(单值子查询)</span></span><br><span class="line"><span class="comment">--查询和ff在同一学院的学生成绩</span></span><br><span class="line"><span class="keyword">select</span> s.xuehao,xingming,c.kecheng,grade</span><br><span class="line"><span class="keyword">from</span> students <span class="keyword">as</span> s,chengji <span class="keyword">as</span> c</span><br><span class="line"><span class="keyword">where</span> s.xuehao=c.xuehao <span class="keyword">and</span></span><br><span class="line">s.xueyuan=(<span class="keyword">select</span> xueyuan <span class="keyword">from</span> students <span class="keyword">where</span> xingming=<span class="string">&#x27;ff&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--select...into:在查询基础上创建新表</span></span><br><span class="line"><span class="keyword">select</span> xuehao,xingming,xingbie <span class="keyword">into</span> 学生信息 <span class="keyword">from</span> students</span><br><span class="line"></span><br><span class="line"><span class="comment">--添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students</span><br><span class="line"><span class="keyword">values</span> (<span class="number">2012</span>,<span class="string">&#x27;aa&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;计算机&#x27;</span>,<span class="string">&#x27;男&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">----使用insert和select插入</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 学生信息</span><br><span class="line"><span class="keyword">select</span> xuehao,xingming,xingbie <span class="keyword">from</span> students</span><br><span class="line"></span><br><span class="line"><span class="comment">--修改数据</span></span><br><span class="line"><span class="keyword">update</span> students </span><br><span class="line"><span class="keyword">set</span> nianling=<span class="number">19</span> <span class="keyword">where</span> xuehao=<span class="number">2012</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> students <span class="keyword">where</span> xuehao=<span class="number">2012</span></span><br><span class="line"><span class="keyword">delete</span> top(<span class="number">20</span>) <span class="keyword">percent</span> <span class="keyword">from</span> students</span><br><span class="line"></span><br><span class="line"><span class="comment">--视图</span></span><br><span class="line"><span class="comment">--创建视图</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> View_students</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> students</span><br><span class="line"></span><br><span class="line"><span class="comment">--修改视图名称</span></span><br><span class="line">exec sp_rename <span class="string">&#x27;View_students&#x27;</span>,<span class="string">&#x27;view_students&#x27;</span></span><br><span class="line"><span class="comment">--修改视图列名</span></span><br><span class="line">exec sp_rename <span class="string">&#x27;view_students.xuehao&#x27;</span>,<span class="string">&#x27;学号&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--向视图插入数据（说明：视图里的数据一旦做了更改，原表的数据也会随之改变）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> view_studetnts</span><br><span class="line"><span class="keyword">values</span> (<span class="number">2013</span>,<span class="string">&#x27;bb&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;计算机&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--修改视图（说明：既能修改视图中的数据又能修改视图的结构）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> view_students</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> xuehao,grade <span class="keyword">from</span> chengji</span><br><span class="line"></span><br><span class="line"><span class="comment">--修改视图中的数据</span></span><br><span class="line"><span class="keyword">update</span> view_students</span><br><span class="line"><span class="keyword">set</span> nianling=<span class="number">20</span></span><br><span class="line"><span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">&#x27;bb&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--删除视图</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> view_students</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除视图中的数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> view_students <span class="keyword">where</span> xueyuan=<span class="string">&#x27;计算机&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--索引</span></span><br><span class="line"><span class="comment">--创建索引</span></span><br><span class="line"><span class="comment">--（1）聚集索引</span></span><br><span class="line"><span class="keyword">create</span> clustered <span class="keyword">index</span> index_xuehao <span class="keyword">on</span> students(xuehao)_</span><br><span class="line"><span class="comment">--（2）非聚集索引</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> index_xingming <span class="keyword">on</span> students(xingming)</span><br><span class="line"><span class="comment">--删除索引</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> students.index_xuehao</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/pic8.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/01/24/sqli-labs_1-10/"><img class="prev-cover" src="/img/pic7.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">sqli-labs_1-10</div></div></a></div><div class="next-post pull-right"><a href="/2021/01/15/buu/"><img class="next-cover" src="/img/pic7.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">buu</div></div></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/head-sculpture.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Ephemeral-fever</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ephemeral-fever"><i class="fab fa-github"></i><span>Follow Me</span></a></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">芜湖，起飞！</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E5%AD%97"><span class="toc-number">1.2.</span> <span class="toc-text">修改数据库名字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%99%E6%95%B0%E6%8D%AE%E5%BA%93%E6%B7%BB%E5%8A%A0%E8%BE%85%E5%8A%A9%E6%96%87%E4%BB%B6%E5%92%8C%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.</span> <span class="toc-text">给数据库添加辅助文件和日志文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.4.</span> <span class="toc-text">删除数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.5.</span> <span class="toc-text">切换数据库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8"><span class="toc-number">2.</span> <span class="toc-text">表</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.1.</span> <span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B2%BE%E7%A1%AE%E6%95%B0%E5%AD%97"><span class="toc-number">2.1.1.</span> <span class="toc-text">精确数字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4"><span class="toc-number">2.1.2.</span> <span class="toc-text">日期和时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97-%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.1.3.</span> <span class="toc-text">字 符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.1.4.</span> <span class="toc-text">二进制字符串</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">2.2.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">2.3.</span> <span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-%E5%88%97-%E5%B1%9E%E6%80%A7"><span class="toc-number">2.4.</span> <span class="toc-text">添加(列)属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.5.</span> <span class="toc-text">修改数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-%E5%88%97-%E5%B1%9E%E6%80%A7"><span class="toc-number">2.6.</span> <span class="toc-text">删除(列)属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%88%97%E5%90%8D"><span class="toc-number">2.7.</span> <span class="toc-text">修改列名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D"><span class="toc-number">2.8.</span> <span class="toc-text">修改表名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.9.</span> <span class="toc-text">约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.10.</span> <span class="toc-text">创建约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.11.</span> <span class="toc-text">删除约束</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BE%8B%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.</span> <span class="toc-text">例：创建图书管理数据库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#T-sql"><span class="toc-number">4.</span> <span class="toc-text">T-sql</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">4.1.</span> <span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.2.</span> <span class="toc-text">流控制语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#begin%E2%80%A6end"><span class="toc-number">4.2.1.</span> <span class="toc-text">begin…end</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if%E2%80%A6else"><span class="toc-number">4.2.2.</span> <span class="toc-text">if…else</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#while-break%E4%B8%8Econtinue"><span class="toc-number">4.2.3.</span> <span class="toc-text">while,break与continue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#case%EF%BC%88%E5%A4%9A%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5%EF%BC%89"><span class="toc-number">4.2.4.</span> <span class="toc-text">case（多分支语句）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#waitfor%EF%BC%88%E5%BB%B6%E8%BF%9F%E8%AF%AD%E5%8F%A5%EF%BC%89"><span class="toc-number">4.2.5.</span> <span class="toc-text">waitfor（延迟语句）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#goto"><span class="toc-number">4.2.6.</span> <span class="toc-text">goto</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#return%E6%97%A0%E6%9D%A1%E4%BB%B6%E9%80%80%E5%87%BA%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.2.7.</span> <span class="toc-text">return无条件退出语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dml"><span class="toc-number">5.</span> <span class="toc-text">dml</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.1.</span> <span class="toc-text">查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%AB%E5%90%8D%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%AF%B9%E6%95%B0%E6%8D%AE%E6%98%BE%E7%A4%BA%E7%9A%84%E6%A0%87%E9%A2%98%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9%EF%BC%89"><span class="toc-number">5.2.</span> <span class="toc-text">别名查询（对数据显示的标题进行修改）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8C%83%E5%9B%B4%E6%90%9C%E7%B4%A2%E6%9D%A1%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">范围搜索条件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%90%9C%E7%B4%A2%E6%9D%A1%E4%BB%B6"><span class="toc-number">5.4.</span> <span class="toc-text">列表搜索条件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E6%9D%A1%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D%E7%AC%A6"><span class="toc-number">5.5.</span> <span class="toc-text">搜索条件中的字符匹配符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B6%89%E5%8F%8A%E7%A9%BA%E5%80%BC%E7%9A%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.6.</span> <span class="toc-text">涉及空值的查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">5.7.</span> <span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E7%BB%84%E8%AF%AD%E6%B3%95"><span class="toc-number">5.8.</span> <span class="toc-text">数据分组语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#order-by"><span class="toc-number">5.9.</span> <span class="toc-text">order by</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.10.</span> <span class="toc-text">表连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.10.1.</span> <span class="toc-text">内部连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.10.2.</span> <span class="toc-text">外部连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9A%E7%94%A8%E6%9D%A5%E8%A1%A8%E7%A4%BAwhere%E5%AD%90%E5%8F%A5%E7%9A%84%E6%9D%A1%E4%BB%B6"><span class="toc-number">5.11.</span> <span class="toc-text">子查询：用来表示where子句的条件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%9F%A5%E8%AF%A2%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%88%9B%E5%BB%BA%E6%96%B0%E8%A1%A8select%E2%80%A6into"><span class="toc-number">5.12.</span> <span class="toc-text">在查询基础上创建新表select…into</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">5.13.</span> <span class="toc-text">添加数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8insert%E5%92%8Cselect%E6%8F%92%E5%85%A5"><span class="toc-number">5.13.1.</span> <span class="toc-text">使用insert和select插入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">5.14.</span> <span class="toc-text">修改数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">5.15.</span> <span class="toc-text">删除数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">6.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-number">6.1.</span> <span class="toc-text">创建视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A7%86%E5%9B%BE%E5%90%8D%E7%A7%B0"><span class="toc-number">6.2.</span> <span class="toc-text">修改视图名称</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E8%A7%86%E5%9B%BE"><span class="toc-number">6.3.</span> <span class="toc-text">管理视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A7%86%E5%9B%BE"><span class="toc-number">6.4.</span> <span class="toc-text">修改视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A7%86%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">6.5.</span> <span class="toc-text">修改视图中的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="toc-number">6.6.</span> <span class="toc-text">删除视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">6.7.</span> <span class="toc-text">删除视图中的数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">7.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">7.1.</span> <span class="toc-text">创建索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">7.2.</span> <span class="toc-text">删除索引</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BE%8B-%E5%85%A8%E6%9C%89"><span class="toc-number">8.</span> <span class="toc-text">例(全有)</span></a></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/01/19/%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85/" title="完全背包"><img src="/img/pic10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="完全背包"/></a><div class="content"><a class="title" href="/2022/01/19/%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85/" title="完全背包">完全背包</a><time datetime="2022-01-19T08:30:22.000Z" title="发表于 2022-01-19 16:30:22">2022-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/19/RSA%E5%B7%B2%E7%9F%A5%E9%AB%98%E4%BD%8D%E6%94%BB%E5%87%BB/" title="RSA已知高位攻击"><img src="/img/pic14.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RSA已知高位攻击"/></a><div class="content"><a class="title" href="/2022/01/19/RSA%E5%B7%B2%E7%9F%A5%E9%AB%98%E4%BD%8D%E6%94%BB%E5%87%BB/" title="RSA已知高位攻击">RSA已知高位攻击</a><time datetime="2022-01-19T02:28:35.000Z" title="发表于 2022-01-19 10:28:35">2022-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/18/01%E8%83%8C%E5%8C%85/" title="01背包"><img src="/img/pic21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="01背包"/></a><div class="content"><a class="title" href="/2022/01/18/01%E8%83%8C%E5%8C%85/" title="01背包">01背包</a><time datetime="2022-01-18T08:41:05.000Z" title="发表于 2022-01-18 16:41:05">2022-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/16/2020%E7%AC%AC%E5%8D%81%E4%B8%80%E5%B1%8A%E8%93%9D%E6%A1%A5%E6%9D%AFPython%E7%BB%84/" title="2020第十一届蓝桥杯Python组"><img src="/img/pic19.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2020第十一届蓝桥杯Python组"/></a><div class="content"><a class="title" href="/2022/01/16/2020%E7%AC%AC%E5%8D%81%E4%B8%80%E5%B1%8A%E8%93%9D%E6%A1%A5%E6%9D%AFPython%E7%BB%84/" title="2020第十一届蓝桥杯Python组">2020第十一届蓝桥杯Python组</a><time datetime="2022-01-16T03:24:30.000Z" title="发表于 2022-01-16 11:24:30">2022-01-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/13/2021%E7%AC%AC%E5%8D%81%E4%BA%8C%E5%B1%8A%E8%93%9D%E6%A1%A5%E6%9D%AFPython%E7%BB%84/" title="2021第十二届蓝桥杯Python组"><img src="/img/pic22.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2021第十二届蓝桥杯Python组"/></a><div class="content"><a class="title" href="/2022/01/13/2021%E7%AC%AC%E5%8D%81%E4%BA%8C%E5%B1%8A%E8%93%9D%E6%A1%A5%E6%9D%AFPython%E7%BB%84/" title="2021第十二届蓝桥杯Python组">2021第十二届蓝桥杯Python组</a><time datetime="2022-01-13T12:16:47.000Z" title="发表于 2022-01-13 20:16:47">2022-01-13</time></div></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/background.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Ephemeral-fever</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://ephemeral-fever.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        addClass: [200,() => {
          document.querySelectorAll('mjx-container:not([display=\'true\']').forEach( node => {
            const target = node.parentNode
            if (!target.classList.contains('has-jax')) {
              target.classList.add('mathjax-overflow')
            }
          })
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>